(function(){"use strict";var t=new function(){},e=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function n(t){var n=e.has(t);return t=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t),!n&&t}function o(t){var e=t.isConnected;if(void 0!==e)return e;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document))}function r(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null}function i(t,e,n){n=n||new Set;for(var o=t;o;){if(o.nodeType===Node.ELEMENT_NODE){var a=o;e(a);var c=a.localName;if("link"===c&&"import"===a.getAttribute("rel")){if((o=a.import)instanceof Node&&!n.has(o))for(n.add(o),o=o.firstChild;o;o=o.nextSibling)i(o,e,n);o=r(t,a);continue}if("template"===c){o=r(t,a);continue}if(a=a.__CE_shadowRoot)for(a=a.firstChild;a;a=a.nextSibling)i(a,e,n)}o=o.firstChild?o.firstChild:r(t,o)}}function a(t,e,n){t[e]=n}function c(){this.a=new Map,this.s=new Map,this.f=[],this.b=!1}function s(t,e){t.b=!0,t.f.push(e)}function u(t,e){t.b&&i(e,function(e){return l(t,e)})}function l(t,e){if(t.b&&!e.__CE_patched){e.__CE_patched=!0;for(var n=0;n<t.f.length;n++)t.f[n](e)}}function f(t,e){var n=[];for(i(e,function(t){return n.push(t)}),e=0;e<n.length;e++){var o=n[e];1===o.__CE_state?t.connectedCallback(o):p(t,o)}}function d(t,e){var n=[];for(i(e,function(t){return n.push(t)}),e=0;e<n.length;e++){var o=n[e];1===o.__CE_state&&t.disconnectedCallback(o)}}function h(t,e,n){var o=(n=n||{}).w||new Set,r=n.i||function(e){return p(t,e)},a=[];if(i(e,function(e){if("link"===e.localName&&"import"===e.getAttribute("rel")){var n=e.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_hasRegistry=!0),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:e.addEventListener("load",function(){var n=e.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var i=new Set(o);i.delete(n),h(t,n,{w:i,i:r})}})}else a.push(e)},o),t.b)for(e=0;e<a.length;e++)l(t,a[e]);for(e=0;e<a.length;e++)r(a[e])}function p(t,e){if(void 0===e.__CE_state){var n=e.ownerDocument;if((n.defaultView||n.__CE_isImportDocument&&n.__CE_hasRegistry)&&(n=t.a.get(e.localName))){n.constructionStack.push(e);var r=n.constructor;try{try{if(new r!==e)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{n.constructionStack.pop()}}catch(t){throw e.__CE_state=2,t}if(e.__CE_state=1,e.__CE_definition=n,n.attributeChangedCallback)for(n=n.observedAttributes,r=0;r<n.length;r++){var i=n[r],a=e.getAttribute(i);null!==a&&t.attributeChangedCallback(e,i,null,a,null)}o(e)&&t.connectedCallback(e)}}}function b(t,e){this.c=t,this.a=e,this.b=void 0,h(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function m(t){t.b&&t.b.disconnect()}function v(t){if(t.a)throw Error("Already resolved.");t.a=void 0,t.b&&t.b(void 0)}function y(t){this.j=!1,this.c=t,this.o=new Map,this.l=function(t){return t()},this.g=!1,this.m=[],this.u=new b(t,document)}c.prototype.connectedCallback=function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t)},c.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t)},c.prototype.attributeChangedCallback=function(t,e,n,o,r){var i=t.__CE_definition;i.attributeChangedCallback&&-1<i.observedAttributes.indexOf(e)&&i.attributeChangedCallback.call(t,e,n,o,r)},b.prototype.f=function(t){var e=this.a.readyState;for("interactive"!==e&&"complete"!==e||m(this),e=0;e<t.length;e++)for(var n=t[e].addedNodes,o=0;o<n.length;o++)h(this.c,n[o])},y.prototype.define=function(t,e){var o,r,i,a,c,s=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!n(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this.c.a.get(t))throw Error("A custom element with name '"+t+"' has already been defined.");if(this.j)throw Error("A custom element is already being defined.");this.j=!0;try{var u=function(t){var e=l[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e},l=e.prototype;if(!(l instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");o=u("connectedCallback"),r=u("disconnectedCallback"),i=u("adoptedCallback"),a=u("attributeChangedCallback"),c=e.observedAttributes||[]}catch(t){return}finally{this.j=!1}e={localName:t,constructor:e,connectedCallback:o,disconnectedCallback:r,adoptedCallback:i,attributeChangedCallback:a,observedAttributes:c,constructionStack:[]},function(t,e,n){t.a.set(e,n),t.s.set(n.constructor,n)}(this.c,t,e),this.m.push(e),this.g||(this.g=!0,this.l(function(){return function(t){if(!1!==t.g){t.g=!1;for(var e=t.m,n=[],o=new Map,r=0;r<e.length;r++)o.set(e[r].localName,[]);for(h(t.c,document,{i:function(e){if(void 0===e.__CE_state){var r=e.localName,i=o.get(r);i?i.push(e):t.c.a.get(r)&&n.push(e)}}}),r=0;r<n.length;r++)p(t.c,n[r]);for(;0<e.length;){for(var i=e.shift(),r=i.localName,i=o.get(i.localName),a=0;a<i.length;a++)p(t.c,i[a]);(r=t.o.get(r))&&v(r)}}}(s)}))},y.prototype.i=function(t){h(this.c,t)},y.prototype.get=function(t){if(t=this.c.a.get(t))return t.constructor},y.prototype.whenDefined=function(t){if(!n(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this.o.get(t);return e?e.f:(e=new function(){var t=this;this.b=this.a=void 0,this.f=new Promise(function(e){t.b=e,t.a&&e(t.a)})},this.o.set(t,e),this.c.a.get(t)&&!this.m.some(function(e){return e.localName===t})&&v(e),e.f)},y.prototype.v=function(t){m(this.u);var e=this.l;this.l=function(n){return t(function(){return e(n)})}},window.CustomElementRegistry=y,y.prototype.define=y.prototype.define,y.prototype.upgrade=y.prototype.i,y.prototype.get=y.prototype.get,y.prototype.whenDefined=y.prototype.whenDefined,y.prototype.polyfillWrapFlushCallback=y.prototype.v;var g=window.Document.prototype.createElement,w=window.Document.prototype.createElementNS,E=window.Document.prototype.importNode,_=window.Document.prototype.prepend,C=window.Document.prototype.append,O=window.DocumentFragment.prototype.prepend,x=window.DocumentFragment.prototype.append,T=window.Node.prototype.cloneNode,S=window.Node.prototype.appendChild,j=window.Node.prototype.insertBefore,N=window.Node.prototype.removeChild,A=window.Node.prototype.replaceChild,k=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),P=window.Element.prototype.attachShadow,L=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),q=window.Element.prototype.getAttribute,D=window.Element.prototype.setAttribute,M=window.Element.prototype.removeAttribute,H=window.Element.prototype.getAttributeNS,R=window.Element.prototype.setAttributeNS,F=window.Element.prototype.removeAttributeNS,I=window.Element.prototype.insertAdjacentElement,V=window.Element.prototype.insertAdjacentHTML,U=window.Element.prototype.prepend,B=window.Element.prototype.append,X=window.Element.prototype.before,W=window.Element.prototype.after,J=window.Element.prototype.replaceWith,z=window.Element.prototype.remove,G=window.HTMLElement,$=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),K=window.HTMLElement.prototype.insertAdjacentElement,Q=window.HTMLElement.prototype.insertAdjacentHTML;function Y(t,e,n){function r(e){return function(n){for(var r=[],i=0;i<arguments.length;++i)r[i-0]=arguments[i];i=[];for(var a=[],c=0;c<r.length;c++){var s=r[c];if(s instanceof Element&&o(s)&&a.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(e.apply(this,r),r=0;r<a.length;r++)d(t,a[r]);if(o(this))for(r=0;r<i.length;r++)(a=i[r])instanceof Element&&f(t,a)}}n.h&&(e.prepend=r(n.h)),n.append&&(e.append=r(n.append))}var Z,tt=window.customElements;if(!tt||tt.forcePolyfill||"function"!=typeof tt.define||"function"!=typeof tt.get){var et=new c;Z=et,window.HTMLElement=function(){function e(){var e=this.constructor;if(!(o=Z.s.get(e)))throw Error("The custom element being constructed was not registered with `customElements`.");var n=o.constructionStack;if(!n.length)return n=g.call(document,o.localName),Object.setPrototypeOf(n,e.prototype),n.__CE_state=1,n.__CE_definition=o,l(Z,n),n;var o,r=n[o=n.length-1];if(r===t)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return n[o]=t,Object.setPrototypeOf(r,e.prototype),l(Z,r),r}return e.prototype=G.prototype,Object.defineProperty(e.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:e}),e}(),function(){var t=et;a(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.a.get(e);if(n)return new n.constructor}return e=g.call(this,e),l(t,e),e}),a(Document.prototype,"importNode",function(e,n){return e=E.call(this,e,n),this.__CE_hasRegistry?h(t,e):u(t,e),e}),a(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var o=t.a.get(n);if(o)return new o.constructor}return e=w.call(this,e,n),l(t,e),e}),Y(t,Document.prototype,{h:_,append:C})}(),Y(et,DocumentFragment.prototype,{h:O,append:x}),function(){var t=et;function e(e,n){Object.defineProperty(e,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,e);else{var r=void 0;if(this.firstChild){var i=this.childNodes,a=i.length;if(0<a&&o(this)){r=Array(a);for(var c=0;c<a;c++)r[c]=i[c]}}if(n.set.call(this,e),r)for(e=0;e<r.length;e++)d(t,r[e])}}})}a(Node.prototype,"insertBefore",function(e,n){if(e instanceof DocumentFragment){var r=Array.prototype.slice.apply(e.childNodes);if(e=j.call(this,e,n),o(this))for(n=0;n<r.length;n++)f(t,r[n]);return e}return r=o(e),n=j.call(this,e,n),r&&d(t,e),o(this)&&f(t,e),n}),a(Node.prototype,"appendChild",function(e){if(e instanceof DocumentFragment){var n=Array.prototype.slice.apply(e.childNodes);if(e=S.call(this,e),o(this))for(var r=0;r<n.length;r++)f(t,n[r]);return e}return n=o(e),r=S.call(this,e),n&&d(t,e),o(this)&&f(t,e),r}),a(Node.prototype,"cloneNode",function(e){return e=T.call(this,e),this.ownerDocument.__CE_hasRegistry?h(t,e):u(t,e),e}),a(Node.prototype,"removeChild",function(e){var n=o(e),r=N.call(this,e);return n&&d(t,e),r}),a(Node.prototype,"replaceChild",function(e,n){if(e instanceof DocumentFragment){var r=Array.prototype.slice.apply(e.childNodes);if(e=A.call(this,e,n),o(this))for(d(t,n),n=0;n<r.length;n++)f(t,r[n]);return e}r=o(e);var i=A.call(this,e,n),a=o(this);return a&&d(t,n),r&&d(t,e),a&&f(t,e),i}),k&&k.get?e(Node.prototype,k):s(t,function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++)t.push(this.childNodes[e].textContent);return t.join("")},set:function(t){for(;this.firstChild;)N.call(this,this.firstChild);S.call(this,document.createTextNode(t))}})})}(),function(){var t=et;function e(e,n){Object.defineProperty(e,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){var r=this,a=void 0;if(o(this)&&(a=[],i(this,function(t){t!==r&&a.push(t)})),n.set.call(this,e),a)for(var c=0;c<a.length;c++){var s=a[c];1===s.__CE_state&&t.disconnectedCallback(s)}return this.ownerDocument.__CE_hasRegistry?h(t,this):u(t,this),e}})}function n(e,n){a(e,"insertAdjacentElement",function(e,r){var i=o(r);return e=n.call(this,e,r),i&&d(t,r),o(e)&&f(t,r),e})}function r(e,n){function o(e,n){for(var o=[];e!==n;e=e.nextSibling)o.push(e);for(n=0;n<o.length;n++)h(t,o[n])}a(e,"insertAdjacentHTML",function(t,e){if("beforebegin"===(t=t.toLowerCase())){var r=this.previousSibling;n.call(this,t,e),o(r||this.parentNode.firstChild,this)}else if("afterbegin"===t)r=this.firstChild,n.call(this,t,e),o(this.firstChild,r);else if("beforeend"===t)r=this.lastChild,n.call(this,t,e),o(r||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");r=this.nextSibling,n.call(this,t,e),o(this.nextSibling,r)}})}P&&a(Element.prototype,"attachShadow",function(t){return this.__CE_shadowRoot=P.call(this,t)}),L&&L.get?e(Element.prototype,L):$&&$.get?e(HTMLElement.prototype,$):s(t,function(t){e(t,{enumerable:!0,configurable:!0,get:function(){return T.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName,n=e?this.content:this,o=w.call(document,this.namespaceURI,this.localName);for(o.innerHTML=t;0<n.childNodes.length;)N.call(n,n.childNodes[0]);for(t=e?o.content:o;0<t.childNodes.length;)S.call(n,t.childNodes[0])}})}),a(Element.prototype,"setAttribute",function(e,n){if(1!==this.__CE_state)return D.call(this,e,n);var o=q.call(this,e);D.call(this,e,n),n=q.call(this,e),t.attributeChangedCallback(this,e,o,n,null)}),a(Element.prototype,"setAttributeNS",function(e,n,o){if(1!==this.__CE_state)return R.call(this,e,n,o);var r=H.call(this,e,n);R.call(this,e,n,o),o=H.call(this,e,n),t.attributeChangedCallback(this,n,r,o,e)}),a(Element.prototype,"removeAttribute",function(e){if(1!==this.__CE_state)return M.call(this,e);var n=q.call(this,e);M.call(this,e),null!==n&&t.attributeChangedCallback(this,e,n,null,null)}),a(Element.prototype,"removeAttributeNS",function(e,n){if(1!==this.__CE_state)return F.call(this,e,n);var o=H.call(this,e,n);F.call(this,e,n);var r=H.call(this,e,n);o!==r&&t.attributeChangedCallback(this,n,o,r,e)}),K?n(HTMLElement.prototype,K):I?n(Element.prototype,I):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Q?r(HTMLElement.prototype,Q):V?r(Element.prototype,V):console.warn("Custom Elements: `Element#insertAdjacentHTML` was not patched."),Y(t,Element.prototype,{h:U,append:B}),function(t){var e=Element.prototype;function n(e){return function(n){for(var r=[],i=0;i<arguments.length;++i)r[i-0]=arguments[i];i=[];for(var a=[],c=0;c<r.length;c++){var s=r[c];if(s instanceof Element&&o(s)&&a.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(e.apply(this,r),r=0;r<a.length;r++)d(t,a[r]);if(o(this))for(r=0;r<i.length;r++)(a=i[r])instanceof Element&&f(t,a)}}X&&(e.before=n(X)),X&&(e.after=n(W)),J&&a(e,"replaceWith",function(e){for(var n=[],r=0;r<arguments.length;++r)n[r-0]=arguments[r];r=[];for(var i=[],a=0;a<n.length;a++){var c=n[a];if(c instanceof Element&&o(c)&&i.push(c),c instanceof DocumentFragment)for(c=c.firstChild;c;c=c.nextSibling)r.push(c);else r.push(c)}for(a=o(this),J.apply(this,n),n=0;n<i.length;n++)d(t,i[n]);if(a)for(d(t,this),n=0;n<r.length;n++)(i=r[n])instanceof Element&&f(t,i)}),z&&a(e,"remove",function(){var e=o(this);z.call(this),e&&d(t,this)})}(t)}(),document.__CE_hasRegistry=!0;var nt=new y(et);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:nt})}}).call(self),this.Element&&function(t){t.matches=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.msMatchesSelector||function(t){for(var e=(this.parentNode||this.document).querySelectorAll(t),n=-1;e[++n]&&e[n]!==this;);return!!e[n]}}(Element.prototype),this.Element&&function(t){t.closest=t.closest||function(t){for(var e=this;e.matches&&!e.matches(t);)e=e.parentNode;return e.matches?e:null}}(Element.prototype),tb=function(){var t;function e(t,e){var n=this;if(n.length=0,!t||t instanceof o.Selector)return n;if(t instanceof o)return[].push.call(n,t),n;switch(typeof t){case"string":o.dom(t+"[data-tb]",e||document).forEach(function(t){t.tb&&Object.keys(t.tb).forEach(function(e){[].push.call(n,t.tb[e])})});break;case"object":if(t instanceof o)return[].push.call(n,t),n;t instanceof RegExp?o.dom("[data-tb]",e||document).forEach(function(e){Object.keys(e.tb).forEach(function(r){var i=e.tb[r];i instanceof o&&i.namespace&&i.namespace.match(t)&&[].push.call(n,i)})}):t.nodeType&&t.tb?Object.keys(t.tb).forEach(function(e){[].push.call(n,t.tb[e])}):(t.constructor===Array||t.length&&t[0]&&!(t instanceof Array))&&[].forEach.call(t,function(t){var e=o(t);[].forEach.call(e,function(t){-1===[].indexOf.call(n,t)&&[].push.call(n,t)})});break;case"function":o.dom("[data-tb]",e||document).map(function(e){Object.keys(e.tb).forEach(function(r){var i=e.tb[r];i&&i instanceof o&&i instanceof t&&[].push.call(n,i)})})}return n}function n(){}function o(){if(!(this instanceof o))return new e(arguments[0]?arguments[0]:void 0,arguments[1]?arguments[1]:void 0);var t,r,i=Array.from(arguments),a="string"==typeof i[0],c=(a&&i[0].substr(0,1),a?"/"+i[0].replace(/\./g,"/").replace(/^\//,"")+".js":""),s=a?o.namespace(i[0].replace(/^\//),"").get():i[0];if(a&&!s)return r=new o(n,i[1]||{},i[2]||!1),o.require(c).then(function(t){return function(){var e=new o(t[0],t[1]||{},t[2]||!1);if(r){for(var n in r)-1===["handlers","target"].indexOf(n)&&r.hasOwnProperty(n)&&(e[n]=r[n]);!function(t,e){for(var n in t.handlers){e.handlers[n]||(e.handlers[n]=[]);for(var o=0,r=t.handlers[n].length;o<r;o++)e.handlers[n].push(t.handlers[n][o])}}(r,e)}}}(i)),r;if("function"==typeof s){if(s.__tb__||(Object.setPrototypeOf(s.prototype,o.prototype),s.__tb__="V8"),(t=new s(i[1]||{},i[2])).namespace||t instanceof n||(t.namespace="string"==typeof i[0]?i[0]:i[0].namespace||o.getId()),t.target=t.target||i[2]||!1,t.target||i[2]&&(!i[2].nodeType&&i[2][0]&&i[2][0].nodeType&&(i[2]=i[2][0]),t.target=i[2]),t.target&&t.target.nodeType&&!(t instanceof n)){t.target.tb=t.target.tb||{},t.target.tb[t.namespace]=t;var u=o.dom(t.target);if("head"!==t.target.nodeName&&-1===u.parents().toArray().indexOf(document.head)&&-1===t.target.tagName.split("").indexOf("-")&&t.namespace&&t.namespace.replace(/\./g,"-").toUpperCase()!==t.target.tagName&&u.addClass(t.namespace.replace(/\./g,"-").toLowerCase()),t.target&&t.target.nodeType){var l=t.target.getAttribute("data-tb");l&&l.length&&-1===l.split(" ").indexOf(t.namespace)?t.target.setAttribute("data-tb",l+" "+t.namespace):t.target.setAttribute("data-tb",t.namespace)}}if(t.handlers)for(var f in t.handlers)"function"==typeof t.handlers[f]?t.handlers[f]=[t.handlers[f]]:t.handlers[f]instanceof Array||delete t.handlers[f];else t.handlers=[];if(!(t instanceof n)){t.on("ready",function(e){t.parent().trigger("ready")},!0);var d=!!t.parent()[0]&&t.parent()[0],h=function(t){t.stopImmediatePropagation()};h.once=!0,d&&(d.handlers?d.handlers.ready||(d.handlers.ready=[]):d.handlers={ready:[]},d.handlers.ready.unshift(h)),t.trigger("init"),t.trigger("ready")}return t}}function r(t,n,r){var i=Array.from(t),a=Array.from(r),c=o();return t instanceof e&&i.forEach(function(t){var o=t[n](...a);o instanceof e&&Array.from(o).forEach(function(t){-1===[].indexOf.call(c,t)&&[].push.call(c,t)})}),c}function i(t){var e=[][t];return-1<["pop","push","unshift","shift","splice"].indexOf(t)?function(){var t=e.apply(this,arguments);return t?t instanceof Array?o(t):t:this}:function(){var t=e.apply(this.toArray(),arguments);return t instanceof Array?this.flush().add(t):t}}n.prototype={namespace:"Nop"},o.extend=function(t){var e;function n(n){e.hasOwnProperty(n)&&e[n]instanceof Object&&e[n].constructor===Object?t[n]=o.extend(t[n]instanceof Object?t[n]:{},e[n]):e.hasOwnProperty(n)&&e[n]instanceof Object&&e[n].constructor===Array?t[n]=Array.from(e[n]):t[n]=e[n]}for(;arguments[1];)e=arguments[1],Object.keys(e).forEach(n),[].splice.call(arguments,1,1);return t},o.parse=function(t,e){var n=Array.prototype.slice.call(arguments);if(n.length){if(1===n.length)return n[1];if(n.length>2){for(;n.length>1;)n[0]=o.parse(n[0],n[1]),n.splice(1,1);return n[0]}if("string"==typeof t){var r=t.match(/\{[^\{\}]*\}/g);r&&r.forEach(function(n){var r=n.substr(1,n.length-2),i=o.namespace(r,e).get();void 0!==i&&(t=t.replace(n,i))})}else if(t.constructor)switch(t.constructor){case Object:Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&(t[n]=o.parse(t[n],e))});break;case Array:t.forEach(function(n,r){t[r]=o.parse(t[r],e)})}return t}console.error("no arguments give to parse")},o.debounce=function(t,e){var n;return function(){var o=this,r=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(o,r)},e)}},o.store=function(){function t(t){var e=this,n=Symbol("observable"),r=Symbol("onChange"),i=t||{};e[n]=o.observable(!1),e[r]=o.debounce(function(){e[n](o.extend({},e))},0),o.extend(e,i)}function e(e,n,r){var i=new t(r);return Object.defineProperty(e,n,{enumerable:!0,writeable:!0,get:function(){return i},set:function(t){for(var e in i)delete i[e];return o.extend(i,t),i}}),e[n]}return t.methods={observe:function(t,e){this[Object.getOwnPropertySymbols(this)[0]].observe(t,e)},bind:function(t){var e=this;!function t(n){if(n.nodeType&&3===n.nodeType){var r=n.nodeValue.match(/\{[^\{\}]*\}/g);if(r){var i=(a=n.nodeValue,function(t){var e,c=!1;r.forEach(function(e){i.values[e]!==t[e]&&(i.values[e]=t[e],c=!0)}),c&&(e=a,n.nodeValue=o.parse(e,i.values))});i.values={},(r=Array.from(r).map(t=>t.substr(1,t.length-2))).forEach(function(t){i.values[t]=""}),e[Object.getOwnPropertySymbols(e)[0]].observe(i)}}var a;n.nodeType&&1===n.nodeType&&(Array.from(n.attributes).forEach(function(t){var r,i=t.value.match(/\{[^\{\}]*\}/g);if(i){var a=(r=t.value,function(e){var c,s=!1;i.forEach(function(t){a.values[t]!==e[t]&&(a.values[t]=e[t],s=!0)}),s&&(c=r,o.dom(n).attr(t.nodeName,o.parse(c,a.values)))});a.values={},(i=Array.from(i).map(t=>t.substr(1,t.length-2))).forEach(function(t){a.values[t]=""}),e[Object.getOwnPropertySymbols(e)[0]].observe(a)}}),Array.from(n.childNodes).forEach(function(e){t(e)}),e[Object.getOwnPropertySymbols(e)[0]].notify())}(t)}},t.prototype=new Proxy(t.methods,{get:function(e,n,r){if(t.methods[n])return t.methods[n];if(n in r==!1&&n in e==!1){var i=new o.Store;Object.defineProperty(r,n,{enumerable:!0,get:function(){return i},set:function(e){if(e&&"object"==typeof e&&e.constructor&&e.constructor===Object)if(i instanceof t){for(var n in i)delete i[n];o.extend(i,e)}else i=new t(e);else i=e;return setTimeout(function(){Object.getOwnPropertySymbols(r)[1]&&r[Object.getOwnPropertySymbols(r)[1]]()},0),i}})}return r[n]},set:function(e,n,r,i){var a=Array.from(arguments);if("object"==typeof r&&r.constructor===Object&&r.constructor.prototype===Object.prototype)if(i[n]instanceof t){for(var c in i[n])delete i[n][c];o.extend(t,r)}else a[0]=i,a[2]=new t(r);return setTimeout(function(){Object.getOwnPropertySymbols(i)[1]&&i[Object.getOwnPropertySymbols(i)[1]]()},0),Reflect.set(...a)}}),o.Store=t,e.Store=t,e}(),o.observable=function(t){var e=t,n=!0,r=function(t,i){function a(){if(n)return r.lastChanged=(new Date).getTime(),r.notify()}if(void 0===t)return e;if(e.constructor===Object)if("string"==typeof t){if(void 0===i)return o.namespace(t,e).get();t.indexOf(".")>-1?o.namespace(t,e).set(i):e[t]=i,a()}else"object"==typeof t&&void 0===i?(e=t,a()):console.warn("tb.observable() set value: parameter 1 should be a string or object if observed data is an object!");else{if(void 0===t)return e;e=t,a()}return r};return r.lastChanged=(new Date).getTime(),r.notifiers=[],r.notify=function(){return r.notifiers.forEach(function(t,n){"function"==typeof t?(t(e),t.once&&r.notifiers.splice(n,1)):r.notifiers.splice(n,1)}),r},r.enableNotify=function(t){return n=!1!==t,r},r.observe=function(t,e){return"function"==typeof t&&(t.once=e||!1,r.notifiers.push(t)),r},r},t=o,o.Selector=e,o.methods={trigger:function(t,r,i){var a,c=this;if(!o.stop()){if((a=t instanceof o.Event?t:new o.Event(t,r,i)).__stopped__||a.__immediateStopped__)return c;if(c instanceof e&&c.length)[].forEach.call(c,function(t){t&&t instanceof o&&!a.__immediateStopped__&&t.trigger(a)});else if(c instanceof o){if(c instanceof n&&"init"!==a.name)return c.one("init",function(){this.trigger(a)}),c;if(c instanceof o&&c.handlers&&c.handlers[a.name]&&a.bubble.indexOf("l")>-1&&(c.handlers[a.name]=c.handlers[a.name].reduce(function(t,e){if(a.bubble.indexOf("l")>-1&&e){try{a.__immediateStopped__?t.push(e):e.apply(c,[a])}catch(t){console.error(t)}e.once||a.__immediateStopped__||t.push(e)}return t},[]),c.handlers[a.name].length||delete c.handlers[a.name]),a.__stopped__)return c;setTimeout(function(){a.bubble.indexOf("u")>-1&&c.parent().trigger(new o.Event(a.name,a.data,"lu")),a.bubble.indexOf("d")>-1&&[].forEach.call(c.children(),function(t){t.trigger(new o.Event(a.name,a.data,"ld"))})},0)}return c}},on:function(t,n,i){var a,c=this;return c instanceof e?r(c,"on",Array.from(arguments)):c instanceof o&&(a=-1<t.indexOf(" ")?t.split(" "):[t],n.once=!!n.once||!!i,a.forEach(function(t){Reflect.get(c,"handlers")||(c.handlers={}),Reflect.get(c.handlers,t)?c.handlers[t].push(n):c.handlers[t]=[n]})),c},one:function(t,e){return this.on(t,e,!0),this},off:function(t,n){var i,a=this;return void 0===t?a:(a instanceof e?r(a,"off",arguments):a instanceof o&&(-1<t.indexOf(" ")?t.split(" "):[t]).forEach(function(t){if(a.handlers[t])if(void 0!==n)for(i=a.handlers[t].indexOf(n);i>-1;)a.handlers[t].splice(i,1),i=a.handlers[t].indexOf(n),0===a.handlers[t].length&&(a.handlers[t]=null,delete a.handlers[t]);else a.handlers[t]=null,delete a.handlers[t]}),a)},parents:function(t){var n=o();return this instanceof e?n=r(this,"parents",arguments):this instanceof o&&this.target&&(this.target.nodeType?o.dom(this.target).parents("[data-tb]").not("html").forEach(function(t){t&&t.tb&&Object.keys(t.tb).forEach(function(e){[].push.call(n,t.tb[e])})}):this.target instanceof o&&([].push.call(n,this.target),this.target.parent()[0]&&[].push.call(n,this.target.parent()[0]))),t?n.filter(t):n},parent:function(t){var n=o();if(this instanceof e)n=r(this,"parent",arguments);else if(this instanceof o&&this.target)if(this.target.nodeType){var i=this.parents().toArray(),a=!!i[0]&&i[0];if(!a)return n;Object.keys(a.target.tb||{}).forEach(function(t){[].push.call(n,a.target.tb[t])})}else this.target instanceof o&&[].push.call(n,this.target);return t?n.filter(t):n},descendants:function(t,n){var i=this,a=o();return i instanceof e?a=r(this,"descendants",arguments):i instanceof o&&i.target.nodeType&&!n?o.dom("[data-tb]",i.target).forEach(function(t){Object.keys(t.tb).forEach(function(e){[].push.call(a,t.tb[e])})}):i instanceof o&&n&&Object.keys(i).forEach(function(t){if("target"!==t&&i[t]instanceof o){[].push.call(a,i[t]);for(var e=o.dom().toArray.call(i[t].descendants("",!0)),n=0,r=e.length;n<r;n++)[].push.call(a,e[n])}}),t?a.filter(t):a},children:function(t,n){var i=o(),a=Array.from(arguments);if(n="undefined"!=typeof module||n,this instanceof e)i=r(this,"children",a);else if(this instanceof o&&this.target.nodeType&&!n){var c=o.getId(),s=o.dom("[data-tb]",this.target),u='[data-tempid="'+c+'"] [data-tb] [data-tb]';o.dom(this.target).attr("data-tempid",c),s.not(u).forEach(function(t,e,n){t.tb&&Object.keys(t.tb).forEach(function(e){[].push.call(i,t.tb[e])})}),o.dom(this.target).removeAttr("data-tempid")}else if(n)for(var l in this)this.hasOwnProperty(l)&&this[l]instanceof o&&[].push.call(i,this[l]);return t?i.filter(t):i},next:function(t){var n,i,a=o();return this instanceof e?a=r(this,"next",arguments):(n=this.parent().children(),i=[].indexOf.call(n,this),n.length>i+1&&[].push.call(a,n[i+1])),t?a.filter(t):a},prev:function(t){var n,i,a=o();return this instanceof e?a=r(this,"prev",arguments):(n=this.parent().children(),(i=[].indexOf.call(n,this))&&[].push.call(a,n[i-1])),t?a.filter(t):a},first:function(t){var n,i=o();return this instanceof e?i=r(this,"first",arguments):(n=this.parent().children(),[].push.call(i,n[0])),t?i.filter(t):i},last:function(t){var n,i=o();return this instanceof e?i=r(this,"last",arguments):(n=this.parent().children(),[].push.call(i,n[n.length-1])),t?i.filter(t):i},toArray:function(){return Array.from(this)},filter:function(t){var n=o(t),r=o();return t?(this instanceof e?[].forEach.call(this,function(t){-1<[].indexOf.call(n,t)&&[].push.call(r,t)}):this instanceof o&&-1<[].indexOf.call(n,this)&&[].push.call(r,this),r):this},not:function(t){var e=Array.from(o(t)),n=o();return[].forEach.call(this,function(t){-1===e.indexOf(t)&&[].push.call(n,t)}),n},add:function(t){var e=o(t).toArray();return o(this.toArray().concat(e))},flush:function(){if(this instanceof e)for(;this.length;)this.pop();return this}};var a,c=new Proxy(o.Store.methods,{get:function(t,e,n){var r=Array.from(arguments);if(!Reflect.get(...r)){var i=new o.Store;Object.defineProperty(n,e,{enumerable:!0,get:function(){return i},set:function(t){if("object"==typeof t&&t.__proto__===Object.prototype)if(i instanceof o.Store){for(var e in i)delete i[e];o.extend(i,t)}else i=new o.Store(t);else i=t;return setTimeout(function(){Object.getOwnPropertySymbols(n)[1]&&n[Object.getOwnPropertySymbols(n)[1]]()},0),i}})}return Reflect.get(...r)},set:function(t,e,n,r){var i,a=Array.from(arguments);if("handlers"!==e&&"object"==typeof n)if(r[e]instanceof o.Store&&n.__proto__===Object.prototype){for(var c in r[e])delete r[e][c];o.extend(r[e],n)}else a[0]=r;return i=Reflect.set(...a),setTimeout(function(){Object.getOwnPropertySymbols(r)[1]&&r[Object.getOwnPropertySymbols(r)[1]]()},0),i}});return Object.setPrototypeOf(o.methods,c),o.prototype=o.methods,o.status={loadCount:o.observable(0)},o.idle=function(t){var e=function(){if(0===o.status.loadCount()){var n=function(){0===o.status.loadCount()?o.status.loadCount.lastChanged===n.lastChanged?"function"==typeof t&&t():(n.lastChanged=o.status.loadCount.lastChanged,setTimeout(n,100)):o.status.loadCount.observe(e,!0)};n.lastChanged=0,setTimeout(n,100)}else o.status.loadCount.observe(e,!0)};o.status.loadCount.observe(e,!0)},e.prototype={concat:i("concat"),every:i("every"),forEach:i("forEach"),indexOf:i("indexOf"),map:i("map"),pop:i("pop"),push:i("push"),reduce:i("reduce"),reduceRight:i("reduceRight"),reverse:i("reverse"),shift:i("shift"),slice:i("slice"),some:i("some"),splice:i("splice"),unshift:i("unshift")},o.extend(e.prototype,o.methods),e.prototype.unique=function(){var t=[];return[].forEach.call(this,function(e){-1===t.indexOf(e)&&t.push(e)}),o.dom(t)},o.plugin=(a=t.prototype,function(t,e){var n=a;n[t]?console.warn("tb.plugin(): Cannot overload existing tb method (",t,")"):n[t]=e}),o}(),"undefined"!=typeof module?module.exports=tb:function(){function t(){tb.attach(document.head),tb.attach(document.body)}document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),t()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),t())})}(),tb.Event=function(t,e,n){this.bubble=n||"l",this.data=e||{},this.name=t||"",this.__stopped__=this.__immediateStopped__=!1},tb.Event.prototype={stopPropagation:function(){return this.__stopped__=!0,this},stopImmediatePropagation:function(){return this.__stopped__=!0,this.__immediateStopped__=!0,this}},tb.debug=!1,tb.assumeTb=function(t){var e=!1;return function(t){if("object"==typeof t&&t.nodeType&&1===t.nodeType&&tb.assumeTb()){var n=tb.dom(t).children().filter(function(t){return 1===t.nodeType&&-1!==t.tagName.indexOf("-")&&!window.customElements.get(t.tagName.toLowerCase)}).forEach(function(t){var e=t.tagName.toLowerCase().split("-"),n=e.length-1,o=t,r=o.outerHTML,i=o.parentNode;e[n]=e[n].substr(0,1).toUpperCase()+e[n].substr(1).toLowerCase();var a=tb.namespace(e.join(".")).get();a?new tb(a,{},t):(e="/"+e.join("/")+".js",console.log("load file: ",e),window.customElements.whenDefined(o.tagName.toLowerCase()).then(function(){i.replaceChild(o,tb.dom(r)[0])}),tb.require(e))});return tb.dom(t).children().filter(function(t){return!!t.nodeType&&1===t.nodeType&&-1===t.tagName.indexOf("-")}).forEach(function(t){tb.assumeTb(t)}),n}return"boolean"==typeof t&&(e=t),e}}(),"undefined"==typeof module&&(tb.dom=function(){var t,e,n=/\S+/g,o=tb.Selector;function r(t,e,n,o){t.detachEvent?t.detachEvent("on"+e,n,o):t.removeEventListener(e,n,o)}function i(t){var e=[][t];return-1<["push","unshift"].indexOf(t)?function(){return e.apply(this,arguments),this.unique()}:function(){var t=e.apply(this,arguments);return t instanceof Array&&t[0]&&t[0].nodeType?tb.dom(t).unique():t}}return(t=function(t,e){var n,r,i=this;if(!t)return i;if(t.nodeType)-1===[].indexOf.call(i,t)&&[].push.call(i,t);else{if(t.__tbSelector__)return t;if(t instanceof o&&t[0])[].forEach.call(t,function(t){t.target&&t.target.nodeType&&-1===[].indexOf.call(i,t.target)&&[].push.call(i,t.target)});else if(t instanceof Array||t.__tbSelector__||t instanceof HTMLCollection||t instanceof NodeList)[].forEach.call(t,function(t){tb.dom(t).forEach(function(t){-1===[].indexOf.call(i,t)&&[].push.call(i,t)})});else if("string"==typeof t){var a,c,s=(a=t.trim(),(c=document.createElement("template")).innerHTML=a,c.content.childNodes?c.content.childNodes:c.childNodes);if(1!==s.length||!s[0].nodeType||3!==s[0].nodeType)return tb.dom(s);n=e&&e.nodeType?e:document,t.split(",").forEach(function(t){(r=n.querySelectorAll(t.trim()))[0]&&[].forEach.call(r,function(t){-1===[].indexOf.call(i,t)&&[].push.call(i,t)})})}}}).arrayMethods={__tbSelector__:!0,length:0,concat:i("concat"),every:i("every"),forEach:i("forEach"),indexOf:i("indexOf"),map:i("map"),pop:i("pop"),push:i("push"),reduce:i("reduce"),reduceRight:i("reduceRight"),reverse:i("reverse"),shift:i("shift"),slice:i("slice"),some:i("some"),splice:i("splice"),unshift:i("unshift")},t.methods=function(){var t;return{add:function(t){var e=this;return"string"!=typeof t&&t.length?[].forEach.call(t,function(t){tb.dom(t).toArray().forEach(function(t){-1===[].indexOf.call(e,t)&&[].push.call(e,t)})}):tb.dom(t).toArray().forEach(function(t){-1===[].indexOf.call(e,t)&&[].push.call(e,t)}),e.unique()},addClass:function(t){if(!t||"string"!=typeof t)return console.warn("method addClass: missing or wrong pClassNames"),this;var e=t.split(" ").filter(function(t){return!!t});return this.forEach(function(t){var n=(t.getAttribute("class")||"").split(" ").filter(function(t){return!!t});e.forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),t.setAttribute("class",n.join(" "))}),this},append:function(t){var e;return this.forEach(function(n){e=tb.dom(t),[].forEach.call(e,function(t){t.nodeType&&(n.appendChild(t),tb.assumeTb(n),tb.dom(n).clean())})}),this},appendTo:function(t){return(t=tb.dom(t))[0]&&(t=t[0],this.forEach(function(e){t.appendChild(e)})),tb.assumeTb(t),this.clean(),this},attr:function(t,e){var n=this,o={};return"object"==typeof t?(Object.keys(t).forEach(function(e){n.forEach(function(n){tb.dom(n).attr(e,t[e])})}),n):arguments.length?void 0===e&&n.length>0?n[0].getAttribute(t):(n.toArray().forEach(function(n){n.setAttribute(t,e)}),n):([].forEach.call(n[0].attributes,function(t){o[t.name]=t.value}),o)},children:function(t){var e=tb.dom();return this.forEach(function(n){var o=void 0!==t&&tb.dom(t);[].forEach.call(n.children,function(t){-1===[].indexOf.call(e,t)&&(!o||-1<[].indexOf.call(o,t))&&e.push(t)})}),e},clean:(t=!0,function(e){return void 0!==e?t=!!e:t&&this.forEach(function(t){var e=document.createTreeWalker(t,128);for(t.normalize();e.nextNode();)setTimeout(function(t){return function(){t.remove()}}(e.currentNode),0)}),this}),descendants:function(t){var e,n=[],o=!!t&&tb.dom(t);return this.forEach(function(t){n=n.concat(tb.dom(t.querySelectorAll("*")).toArray())}),n=tb.dom(n).unique().toArray(),o&&(e=n.filter(function(t){return-1<[].indexOf.call(o,t)})),tb.dom(o?e:n)},empty:function(){return this.forEach(function(t){t.innerHTML=""}),this},filter:function(t){var e,n=tb.dom(t);return"undefined"===t?this:("string"==typeof t?e=[].filter.call(this,function(t){return-1<n.indexOf(t)}):t instanceof Function&&(e=[].filter.call(this,t)),tb.dom(e))},first:function(){var t=tb.dom();return tb.dom.length&&t.push(this[0]),t},hasClass:function(t){var e=!!this[0]&&this[0];if(e)return e.className.split(" ").indexOf(t)>-1},hide:function(){return this.forEach(function(t){var e=window.getComputedStyle(t).getPropertyValue("display");t.style.prevDisplay=e&&"none"!==e?e:"inline",t.style.display="none"}),this},html:function(t){return void 0===t?this[0]?this[0].innerHTML:"":("string"==typeof t&&this.forEach(function(e){e.innerHTML=t}),this)},insertBefore:function(t){var e=!!tb.dom(t)[0]&&tb.dom(t)[0];if(e)return this.forEach(function(n){n.nodeType&&e.parentElement.insertBefore(n.cloneNode(!0),t)}),tb.dom(t).clean(),tb.assumeTb(t),this},insertAfter:function(t){var e=!!tb.dom(t)[0]&&tb.dom(t)[0],n=e.nextSibling||!1;if(e)return this.forEach(function(t){t.nodeType&&(n?e.parentElement.insertBefore(t.cloneNode(!0),n):e.parentElement.appendChild(t.cloneNode(!0)))}),tb.dom(t).clean(),tb.assumeTb(t),this},last:function(){var t=tb.dom();return tb.dom.length&&t.push(this.pop()),t},next:function(){var t=tb.dom();return tb.dom.length&&this[0].nextSibling&&t.push(this[0].nextSibling),t},not:function(t){var e=this,n=void 0!==t&&document.querySelectorAll(t);return n?(n.forEach(function(t){var n=[].indexOf.call(e,t);n>-1&&[].splice.apply(e,[n,1])}),e):e},off:function(t,e,n){var o=t.indexOf(" ")>-1?t.split(" "):[t],i="boolean"==typeof n&&n;return this.forEach(function(t){t.nodeType&&(e?o.forEach(function(n){r(t,n,e,i)}):o.forEach(function(e){t["on"+e]=null,t.removeAttribute("on"+e)}))}),this},on:function(t,e,n){var o,i=this,a=t.indexOf(" ")>-1?t.split(" "):[t],c="boolean"==typeof n&&n;return e.once&&((o=function(t,e){return function(e){i.forEach(function(t){t.nodeType&&a.forEach(function(e){r(t,e,o,c)})}),t.apply(e,arguments)}}(e)).that=i,o.remove=function(){i.forEach(function(t){t.nodeType&&a.forEach(function(e){r(t,e,o,c)})})}),i.forEach(function(t){t.nodeType&&a.forEach(function(n){!function(t,e,n,o){t.attachEvent?t.attachEvent("on"+e,n,o):t.addEventListener(e,n,o)}(t,n,o||e,c)})}),o||i},one:function(t,e,n){return e.once=!0,this.on(t,e,n)},parent:function(t){var e=tb.dom(),n=void 0!==t&&tb.dom(t);return this.forEach(function(t){var o=t.parentNode;-1===[].indexOf.call(e,o)&&(!n||-1<[].indexOf.call(n,o))&&[].push.call(e,o)}),e},parents:function(t){var e,n=tb.dom(),o=void 0!==t&&tb.dom(t);return this.forEach(function(t){for(e=t.parentNode;e&&e.tagName&&"HTML"!==e.tagName;)-1===[].indexOf.call(n,e)&&(!o||-1<[].indexOf.call(o,e))&&n.push(e),e=e.parentNode}),n},previous:function(){var t=tb.dom();return tb.dom.length&&this[0].previousSibling&&t.push(this[0].previousSibling),t},remove:function(t){var e=this;return e.forEach(function(t,n){e[n]=t.parentNode.removeChild(t)}),e},removeAttr:function(t){var e,o,r=t&&t.match(n);return this.forEach(function(t){if(o=0,r&&t.nodeType&&1===t.nodeType)for(;e=r[o++];)t.removeAttribute(e)}),this},removeClass:function(t){var e=t.split(" ").filter(function(t){return!!t});return this.forEach(function(t){var n=(t.getAttribute("class")||"").split(" ").filter(function(t){return!!t});e.forEach(function(e){for(;n.indexOf(e)>-1;)n.splice(n.indexOf(e),1);n.length?tb.dom(t).attr("class",n.join(" ")):tb.dom(t).removeAttr("class")})}),this},show:function(){return this.forEach(function(t){t.style.display=t.style.prevDisplay?t.style.prevDisplay:"block"}),this},toArray:function(){return Array.from(this)},toggleClass:function(t){var e;return this.forEach(function(n){(e=tb.dom(n))[e.hasClass(t)?"removeClass":"addClass"](t)}),this},trigger:function(t,e,n,o){var r,i="boolean"!=typeof n||n,a="boolean"!=typeof o||o,c=t.split(" ");return this.forEach(function(t){t.nodeType&&c.forEach(function(n){"createEvent"in document?(r=document.createEvent("HTMLEvents"),tb.extend(r.data,e),r.initEvent(n,i,a),t.dispatchEvent(r)):(r=document.createEventObject(),tb.extend(r.data,e),r.eventType=n,t.fireEvent("on"+r.pThisEventName,r))})}),this},unique:function(){var t=[];return[].forEach.call(this,function(e){-1===t.indexOf(e)&&t.push(e)}),tb.dom(t)},val:function(t){var e,n="input select textarea".split(" "),o="button file image reset submit".split(" ");function r(t){return 1===t.nodeType&&n.indexOf(t.tagName.toLowerCase())>-1&&-1===o.indexOf(t.type)}var i={select:function(t){var e,n=this,o="select-multiple"===n.type;if(!arguments.length)return e=[],[].forEach.call(n.selectedOptions,function(t){if(t.selected&&!(t.disabled||t.parentNode.disabled&&"optgroup"===t.parentNode.nodeName)){var n=t.value;e.push(n)}}),o?e:e[0]?e[0]:"";t=t.constructor!==Array?[t]:t,t=o||t.constructor!==Array?t:[t[0]],[].forEach.call(n.options,function(e){var n,o=t.indexOf(e.value);o+1?(n=t[o],e.selected=!!n):e.selected=!1}),t.forEach(function(t){tb.dom('option[value="'+t+'"]',n).selected=!0})},default:function(t){var e;if("radio"===this.type){var n='[type="radio"][name="'+this.name+'"]',o=tb.dom(this).parents("form").descendants(n);return e="",o.forEach(function(n){var o;void 0!==t?(o=n.value===t,n.checked=!!o,e=n.checked?n.value:e):!0===n.checked&&(e=n.value)}),e}return"checkbox"===this.type?(void 0!==t?(this.checked=!!t,e=this.checked):(e=!1,!0===this.checked&&(e=!0)),e):arguments.length?(null==t&&(t=""),void(this.value=t)):"string"==typeof(e=this.value)?e:null==e?"":e}};return arguments.length?(this.forEach(function(n){r(n)&&(e=i[n.tagName.toLowerCase()]?i[n.tagName.toLowerCase()].call(n,t):i.default.call(n,t))}),this):(this.some(function(t){return!!r(t)&&(e=i[t.tagName.toLowerCase()]?i[t.tagName.toLowerCase()].call(t):i.default.call(t),!0)}),e)},values:function(t){var e,n=this,o=n[0]||void 0;if(!o)return n;if("object"!=typeof t||!o)return o.getValues||(o.getValues=tb.observable({}),tb.dom("input,select,textarea",o).on("keyup change select",tb.debounce(function(){o.getValues(tb.extend({},tb.dom(o).values()))},5))),o.values=o.values?o.values:tb.observable({}),i.prototype={bind:function(t,e){o.getValues.observe(function(){tb.extend(t,o.getValues()),setTimeout(function(){Object.getOwnPropertySymbols(t)[1]&&t[Object.getOwnPropertySymbols(t)[1]]()},0)},e),o.getValues.notify()},observe:function(t,e){o.values.observe(t,e)}},e=new i,Object.defineProperty(n,"values",{enumerable:!0,configurable:!0,set:function(t){o.values.enableNotify(!1),Object.keys(t).forEach(function(e){n.values[e]=t[e]}),o.values.enableNotify().notify()},get:function(t,n){return function(){return tb.dom("input[name],select[name],textarea[name]",t).forEach(function(t){var o=tb.dom(t).attr("name");e.hasOwnProperty(o)||Object.defineProperty(e,o,{enumerable:!0,get:function(){return tb.dom(t).val()},set:function(o){var r=tb.dom(t).val(o);return n(e),r}})}),t.values(e),e}}(o,o.values)}),n.values;var r=tb.dom(o).values();function i(){}Object.keys(t).forEach(function(e){r.hasOwnProperty(e)&&(r[e]=t[e])})}}}(),t.prototype=tb.extend(t.methods,t.arrayMethods),(e=function(e,n){return new t(e,n)}).innerProto=t.prototype,e}(),tb.dom.plugin=function(t,e){var n=tb.dom.innerProto;n[t]?console.warn("tb.dom.plugin(): Cannot overload existing tb method (",t,")"):n[t]=e}),tb.nop=function(){},tb.namespace=function(){function t(t,e){this.namespace=t,this.target=e,this.namespaceArray=t.indexOf(".")?t.split("."):[t],this.forceCreation=!1}return t.prototype={get:function(){return this.forceCreation=!1,this._walk(this.target?this.target:window,this.namespaceArray)},set:function(t){"function"==typeof t&&t.prototype!==Function.prototype&&(t.prototype.namespace=this.namespace);return this.value=t,this.forceCreation=!0,this._walk(this.target?this.target:window,this.namespaceArray)},_walk:function(t,e){!t[e[0]]&&this.forceCreation&&(t[e[0]]={});return e.length<2?(this.forceCreation&&void 0!==this.value&&(t[e[0]]=this.value),t.hasOwnProperty(e[0])?t[e[0]]:void 0):t.hasOwnProperty(e[0])?(t=t[e[0]],e.shift(),this._walk(t,e)):void 0}},function(e,n){return new t(e,n)}}(),tb.attach=function(t){var e=t||document.body,n=tb.dom(e.querySelectorAll("[data-tb]")).toArray();e.getAttribute("data-tb")&&(n=[e].concat(n)),n.forEach(function(t){t.getAttribute("data-tb").split(" ").forEach(function(e){t.tb=t.tb||{},t.tb[e]||new tb(e,null,t)})})},tb.getId=function(){return"id-"+(new Date).getTime()+"-"+Math.random().toString().replace(/\./,"")},tb.Promise=function(){"use strict";var t=null,e={};function n(t){if(t=t||tb.nop,"object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._deferredState=0,this._state=0,this._value=null,this._deferreds=null,t!==tb.nop&&s(t,this)}return n._onHandle=null,n._onReject=null,n.prototype={then:function(t,e){if(!(this instanceof n))return function(t,e,n){return new t.constructor(function(r,i){var a=new tb.Promise(tb.nop);a.then(r,i),o(t,new c(e,n,a))})}(this,t,e);var r=new n(tb.nop);return o(this,new c(t,e,r)),r},catch:function(t){return this.then(null,t)},finally:function(t){var e=this;return this.then(function(o){return n.resolve(t(e._value)).then(function(){return e._value})},function(o){return n.resolve(t(e._value)).then(function(){throw e._value})})},done:function(t,e){(arguments.length?this.then.apply(this,arguments):this).then(null,function(t){setTimeout(function(){throw t},0)})}},n.resolve=function(t){var e=new tb.Promise(function(t,e){});return r(e,t),e},n.reject=function(t){var e=new tb.Promise(function(t,e){});return i(e,t),e},n.all=function(t){var e=t.length,o=tb.observable(e),a=new n,c=new Array(e);return t.forEach(function(t,e){t.then&&"function"==typeof t.then||(t=tb.Promise.resolve(t)),t.then(function(t){c[e]=t}).catch(function(t){0===a._state&&i(a,t._value)}).finally(function(t){o(o()-1)})}),o.observe(function(t){0===t&&(o=null,0===a._state&&r(a,c))}),a},n.race=function(t){var e=new tb.Promise;return t.forEach(function(t,o,a){t.constructor!==n&&(a[o]=n.resolve(t)),a[o].then(function(t){0===e._state&&r(e,t)}).catch(function(t){0===e._state&&i(e,t)})}),e},n;function o(o,a){for(;3===o._state;)o=o._value;if(n._onHandle&&n._onHandle(o),0===o._state)return 0===o._deferredState?(o._deferredState=1,void(o._deferreds=a)):1===o._deferredState?(o._deferredState=2,void(o._deferreds=[o._deferreds,a])):void o._deferreds.push(a);!function(n,o){setTimeout(function(){var a=1===n._state?o.onFulfilled:o.onRejected;if(null!==a){var c=function(n,o){try{return n(o)}catch(n){return t=n,e}}(a,n._value);c===e?i(o.promise,t):r(o.promise,c)}else 1===n._state?r(o.promise,n._value):i(o.promise,n._value)},0)}(o,a)}function r(o,r){if(r===o)return i(o,new TypeError("A promise cannot be resolved with itself."));if(r&&("object"==typeof r||"function"==typeof r)){var c=function(n){try{return n.then}catch(n){return t=n,e}}(r);if(c===e)return i(o,t);if(c===o.then&&r instanceof n)return o._state=3,o._value=r,void a(o);if("function"==typeof c)return void s(c.bind(r),o)}o._state=1,o._value=r,a(o)}function i(t,e){t._state=2,t._value=e,n._onReject&&n._onReject(t,e),a(t)}function a(t){if(1===t._deferredState&&(o(t,t._deferreds),t._deferreds=null),2===t._deferredState){for(var e=0;e<t._deferreds.length;e++)o(t,t._deferreds[e]);t._deferreds=null}}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function s(n,o){var a=!1,c=function(n,o,r){try{n(o,r)}catch(n){return t=n,e}}(n,function(t){a||(a=!0,r(o,t))},function(t){a||(a=!0,i(o,t))});a||c!==e||(a=!0,i(o,t))}}(),tb.Require=function(t){return tb.require(t)},tb.Require.prototype={},tb.require=function(t,e){var n,o=[];if(!t){var r="tb.require: no files given.";return console.warn(r),tb.Promise.reject(r)}return"string"==typeof t&&(t=[t]),t.forEach(function(t){var e=i(t);if(-1===t.split("/").pop().indexOf(".")){var n="tb.require: no file type given for ";return console.warn(n,t),tb.Promise.reject(n+t)}tb.require.repo[e]||(tb.require.repo[e]={}),tb.require.repo[e][t]||(tb.require.repo[e][t]="undefined"==typeof module?function(t){var e,n={css:{tag:"link",attributes:{type:"text/css",rel:"stylesheet",href:"{src}"}},js:{tag:"script",attributes:{type:"text/javascript",src:"{src}"}}},o=i(t),r=t;tb.require.cacheBust;if(n[o])return tb.status.loadCount(tb.status.loadCount()+1),new tb.Promise(function(r,i){var a;e=n[o],(a=document.createElement(e.tag)).async=!0,a.onreadystatechange=a.onload=function(){var t=a.readyState;t&&!/loaded|complete/.test(t)||r("1")},Object.keys(e.attributes).forEach(function(n){a.setAttribute(n,tb.parse(e.attributes[n],{src:t}))}),document.getElementsByTagName("head")[0].appendChild(a)}).finally(function(){tb.status.loadCount(tb.status.loadCount()-1),tb.require.repo[o][t]="done"});var a={url:r};return tb.request(a).finally(function(e){if("json"===o&&e.text)try{tb.require.repo[o][t]=JSON.parse(e.text)}catch(t){console.error("invalid JSON: ",e)}else tb.require.repo[o][t]=e.text})}(t):function(t){var e=require("fs"),n=i(t);return new tb.Promise(function(o,r){var i=t;if("js"===n)try{require(i),o("done.")}catch(t){o('error reading file using require("'+i+'"")')}else if(e.existsSync(i))try{o(e.readFileSync(i,"utf8"))}catch(t){o("error: could not read file ["+i+"]")}else o("error: file not found ["+i+"]")}).finally(function(e){tb.require.repo[n][t]=e})}(t)),o.push(tb.require.repo[e][t])}),n=tb.Promise.all(o),e&&n.finally(function(t){e.call(t)}),n;function i(t){return t.split("?")[0].split(".").pop()}},tb.require.repo={},tb.require.cacheBust=!0,tb.require.loadcount=0,tb.require.get=function(t){return tb.require.repo[t.split("?")[0].split(".").pop()][t]||void 0},tb.webSocket=function(){function t(t){var e=this;e.config=t,e.socket=e.config.protocols?new WebSocket(e.config.url,e.config.protocols):new WebSocket(e.config.url),e.socket.onopen=function(t){e.trigger("open",t)},e.socket.onerror=function(t){e.trigger("error",t)},e.socket.onmessage=function(t){e.trigger("message",t.data)},e.socket.onclose=function(t){e.trigger("close",t)}}return t.prototype={send:function(t){this.socket.send(t)},close:function(){this.socket.close()}},function(e,n){return new tb(t,{url:e,protocols:n})}}(),"undefined"==typeof module&&(tb.request=function(){var t=[],e=0,n=30,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"];function r(t,e,o,r,c){var s,u=window.setInterval((s=0,function(){t.connection.readyState!==s&&(s=t.connection.readyState),4===s&&(t.aborttimer&&window.clearTimeout(t.aborttimer),window.clearInterval(u),function(t,e,n,o){var r,c;try{r=t.connection.status}catch(t){r=13030}if(r>=200&&r<400){c=i(t,o);try{e(c)}catch(t){tb.debug}}else c=i(t,tb.extend({},o)),n(c);a(t)}(t,e,r,c))}),n);return u}function i(t,e){var n={tId:t.identifier,status:t.connection.status,statusText:t.connection.statusText,responseHeaders:{},requestHeaders:e.headers,text:t.connection.responseText,xml:t.connection.responseXML,options:e};if(t.connection.getAllResponseHeaders().split("\r\n").forEach(function(t){var e=t.split(":")[0],o=t.substr(t.indexOf(":")+1);t&&(n.responseHeaders[e]=o)}),e.dataType&&"json"===e.dataType.toLowerCase())try{n.data=JSON.parse(t.connection.responseText)}catch(e){console.warn("expected JSON, could not parse: "+t.connection.responseText)}return n}function a(n){!function(n){tb.status.loadCount(tb.status.loadCount()-1),t.indexOf(n)&&(e--,t.splice(t.indexOf(n)),0===e&&"complete")}(n),n.connection&&(n.connection=null),n=null}return function(n){var c,s,u="tb"+tb.getId(),l=function(t){var e,n;if("undefined"!=typeof ActiveXObject)for(var r=0;r<o.length;++r)try{n=new ActiveXObject(o[r]),e={connection:n,identifier:t},void o[r]}catch(t){}try{n=new XMLHttpRequest,e={connection:n,identifier:t}}catch(t){}finally{return e}}(u),f=!!n.method&&n.method.toUpperCase()||"GET",d=n.url,h="",p=n.success||tb.nop,b=n.error||tb.nop,m=n.finally||tb.nop,v=(n.statechange||tb.nop,n.cachable||!0),y=n.headers=n.headers||{},g=n.timeout||!1,w=void 0===n.async||!1!==n.async;if(tb.status.loadCount(tb.status.loadCount()+1),t.push(s),e++,"loading",n.type&&"json"===n.type.toLowerCase()&&(y["Content-Type"]="application/json;charset=UTF-8"),void 0!==n.params)switch(c=y&&y["Content-Type"]?y["Content-Type"]:"application/x-www-form-urlencoded"){case"application/json;charset=UTF-8":h=JSON.stringify(n.params);break;default:Object.keys(n.params).forEach(function(t){h+=(h.length>0?"&":"")+t+"="+n.params[t]})}if(!1===v&&(d+=(d.indexOf("?")<0?"?":"&")+"tbUid="+u),l){var E=new tb.Promise(function(t,e){var o,s,u;"GET"!==f&&"DELETE"!==f||""===h||(d=d+(d.indexOf("?")<0?"?":"&")+h),l.src=d,l.connection.open(f,d,w),!0===w&&(l.poll=r(l,t,0,e,n)),Object.keys(y).forEach(function(t){"Content-Type"!==t&&l.connection.setRequestHeader(t,y[t])}),g&&(l.timeoutTimer=window.setTimeout((s=l,u="function"==typeof(o=g).cb&&o.cb,function(){"function"==typeof u&&u(),s.connection.abort(),window.clearInterval(s.poll)}),g.ms)),l.abort=function(t){return function(){window.clearInterval(t.poll),t.connection&&t.connection.abort(),a(t)}}(l),("POST"===f||"PUT"===f)&&""!==h?(l.connection.setRequestHeader("Content-Type",c),l.connection.send(h)):l.connection.send(null),!1===w&&(tb.request.dec(),l.connection.status>=200&&l.connection.status<300?t(i(l,tb.extend({},n))):e(i(l,tb.extend({},n))))});return E.then(function(t){p(t)}).catch(function(t){b(t)}).finally(function(t){m(t)}),E}return!1}}()),tb.stop=function(t){var e=!1;return function(t){return e=t||e}}(),"undefined"==typeof module&&(tb.CRUD=function(t){var e=this;e.data=tb.observable({}),e.config={},tb.extend(e.config,{create:{url:"",method:"POST",success:function(t){e.data(t)}},read:{url:"",method:"GET",success:function(t){e.data(t)}},update:{url:"",method:"PUT",success:function(t){e.data(t)}},delete:{url:"",method:"DELETE",success:function(t){e.data(t)}}},t)},tb.CRUD.prototype=function(){return{create:function(t){var e=tb.extend({},this.config.create);t=t||{},e.url?tb.request(tb.extend(e,{url:t?tb.parse(this.config.create.url,t):this.config.create.url},{params:t})):console.error("no create url given!")},read:function(t){var e=tb.extend({},this.config.read);t=t||{},e.url?tb.request(tb.extend(e,{url:t?tb.parse(this.config.read.url,t):this.config.read.url},{params:t})):console.error("no read url given!")},update:function(t){var e=tb.extend({},this.config.update);t=t||{},e.url?tb.request(tb.extend(e,{url:t?tb.parse(this.config.update.url,t):this.config.update.url},{params:t})):console.error("no update url given!")},delete:function(t){var e=tb.extend({},this.config.delete);t=t||{},e.url?tb.request(tb.extend(e,{url:t?tb.parse(this.config.delete.url,t):this.config.delete.url},{params:t})):console.error("no delete url given!")}}}());class Tb extends tb{constructor(t,e){super(t,e);var n=Symbol("observable"),o=Symbol("onChange");this[n]=tb.observable(!1),this[o]=tb.debounce(function(){this[n](tb.extend({},this))},0)}}