<!DOCTYPE html>
<html>
    <head>
        <title>tb manual testing</title>

        <link rel="stylesheet" type="text/css" href="jasmine/jasmine.css">
        <link rel="stylesheet" type="text/css" href="test/GrandParent.css">

        <style>

            legend {
                display: inherit;
                margin:  inherit;
                vertical-align:  inherit;
            }

            label {
                display: inline;
                margin-top: 5px;
                margin-left: 5px;
                vertical-align: top;
                width: 10em;
                text-align: right;
            }

            label::before {
                content: ' ';
                display: block;
            }

            form input,
            form select,
            form textarea {
                margin-left: 5px;
                margin-top: 0px;
                display: inline;
            }

            form label + textarea {
                display: inline-block;
                margin-top: 3px;
            }

            form input + label {
                width: inherit;
                margin-top: 3px;
                text-align: left;
            }

            body > form {
                display: inline-block;
                width: 49%;
            }

        </style>

        <script type="text/javascript" src="tb/tb.js"></script>

        <script type="text/javascript" src="repo-min.js"></script>

        <script>
            tb.idle(

                function(){

                    // run tests
                    setTimeout(function(){
                        tb.Require([
                            'tbTest.js'
                        ]);
                    }, 5000);

                    // make svg favicon
                    var $ = tb.dom,
                        $c = $('<canvas>'),
                        i = new Image();
                    
                    function loaded(){
                                
                        //set canvas to image size
                        $c.attr({
                            height: i.height,
                            width: i.width
                        });

                        // get context
                        var ctx = $c[0].getContext('2d');
                        ctx.globalCompositeOperation = 'copy';
                        ctx.drawImage(i, 0, 0, $c.attr('width'), $c.attr('height'));

                        // copy context content to link node
                        $('<link rel="icon">')
                            .attr(
                                'href', 
                                $c[0].toDataURL()
                            )
                            .appendTo(
                                document.head
                            );
                    }

                    i.addEventListener('load', loaded)
                    i.src = '/twoBirds.svg';

                }
            );
        </script>
    </head>
    <body data-tb="test.GrandParent">
        <img style="position:fixed;top:10px;right:10px" src="/twoBirds.svg"/>
        <form style="background-color:{colorInput}" data-tb="test.TestForm" />
    </body>
</html>
